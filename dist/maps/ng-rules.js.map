{"version":3,"sources":["ng-rules.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","RulesService","$timeout","watchItems","_loop","watchExpressionList","rItems","rules","angular","isDefined","originName","isArray","source","forEach","item","index","push","watchFunction","_watchHandle","watchHandle","$scope","undefined","watchFn","$watch","watchContent","customRules","result","timeChecker","watchList","cancelWatchItems","clear","setRule","ruleName","method","getInitResult","$watchCollection","val","splice","extend","$invalid","$setRule","originRules","copy","_regexCollection2","arguments","length","$eval","_analyzeOriginRules2","$inject","Object","defineProperty","value","_regexCollection","_analyzeOriginRules","factory","required","isUndefined","test","number","email","maxLen","len","str","String","rps_value","replace","eq","orginVal","compareVal","equals","gt","val1","val2","analyzeOriginRules","analyzeScope","newRules","ruleStr","np","updateRule","sp","split","selectorSplit","field","itemFilter","_pseudoFilter2","slice","join","rItem","i","rsp","methodName","isReverse","map","type","_enumType","ParamType","VALUE","PROPERTY","indexOf","substr","params","filter","_pseudoFilter","pseudoFilter","pseudoStr","firstChild","lastChild","nthChild","reverse","content","exec","Number","rItemList","propPath","hasAnotherField","Function","_ret","fields","getWatchFields","funcStr","itemPath","v","_typeof","watchItem","path","createProp","ri","param","concat","paramsStr","newValue","cancel","checkValid","findIndex","values","propStr","propVal","node","spName","arrayItem","_p","Symbol","iterator","constructor","Array","prototype","predicate","this","TypeError","list","thisArg"],"mappings":"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","file":"ng-rules.js","sourceRoot":"/source/","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tRulesService.$inject = [\"$timeout\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\n\tvar _regexCollection = __webpack_require__(1);\n\n\tvar _regexCollection2 = _interopRequireDefault(_regexCollection);\n\n\tvar _analyzeOriginRules = __webpack_require__(2);\n\n\tvar _analyzeOriginRules2 = _interopRequireDefault(_analyzeOriginRules);\n\n\tvar _watchHandle = __webpack_require__(5);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\tangular.module('ngRules', []).factory('$rules', RulesService);\n\t//import {ParamType} from './enum-type';\n\n\n\tfunction RulesService($timeout) {\n\t    'ngInject';\n\n\t    return function ruleFn() {\n\t        var $scope = void 0,\n\t            originName = void 0,\n\t            rules = void 0,\n\t            originRules = void 0,\n\t            timeChecker = void 0,\n\t            source = void 0,\n\t            result = void 0,\n\t            customRules = angular.copy(_regexCollection2.default);\n\n\t        //handle dynamic arguments\n\t        if (arguments.length === 2) {\n\t            $scope = arguments[0];\n\t            originRules = arguments[1];\n\t            source = $scope;\n\t        } else {\n\t            $scope = arguments[0];\n\t            originName = arguments[1];\n\t            originRules = arguments[2];\n\t            source = $scope.$eval(originName);\n\t        }\n\n\t        result = getInitResult();\n\n\t        rules = (0, _analyzeOriginRules2.default)(originRules, $scope, originName);\n\n\t        var watchList = [];\n\n\t        watchItems();\n\n\t        return result;\n\n\t        function watchItems() {\n\t            var _loop = function _loop(p) {\n\t                var watchExpressionList = [],\n\t                    rItems = rules[p];\n\n\t                if (angular.isDefined(originName) && angular.isArray(source)) {\n\t                    source.forEach(function (item, index) {\n\t                        watchExpressionList.push({\n\t                            watchFunction: (0, _watchHandle.watchHandle)($scope, rItems, originName, index),\n\t                            index: index,\n\t                            item: item\n\t                        });\n\t                    });\n\t                } else {\n\t                    watchExpressionList = [{\n\t                        watchFunction: (0, _watchHandle.watchHandle)($scope, rItems, originName),\n\t                        index: undefined,\n\t                        item: source\n\t                    }];\n\t                }\n\n\t                watchExpressionList.forEach(function (item) {\n\t                    var watchFn = $scope.$watch(item.watchFunction, (0, _watchHandle.watchContent)(rItems, item, p, customRules, result, timeChecker, $timeout, $scope, originName));\n\t                    watchList.push(watchFn);\n\t                });\n\t            };\n\n\t            for (var p in rules) {\n\t                _loop(p);\n\t            }\n\t        }\n\n\t        function cancelWatchItems() {\n\t            watchList.forEach(function (clear) {\n\t                clear();\n\t            });\n\n\t            watchList = [];\n\t        }\n\n\t        function setRule(ruleName, method) {\n\t            customRules[ruleName] = method;\n\t        }\n\n\t        function getInitResult() {\n\t            var result = void 0;\n\n\t            if (angular.isDefined(originName) && angular.isArray(source)) {\n\t                result = [];\n\t                $scope.$watchCollection(originName, function (val) {\n\t                    if (angular.isDefined(val)) {\n\t                        cancelWatchItems();\n\n\t                        result.splice(0);\n\n\t                        watchItems();\n\t                    }\n\t                });\n\t            } else {\n\t                result = {};\n\t            }\n\n\t            angular.extend(result, {\n\t                $invalid: false,\n\t                $setRule: setRule\n\t            });\n\n\t            return result;\n\t        }\n\t    };\n\t}\n\n\texports.default = RulesService;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = {\n\t    'required': function required(value) {\n\t        return !(angular.isUndefined(value) || value === null || /^\\s*$/.test(value));\n\t    },\n\t    'number': function number(value) {\n\t        return (/^-?\\d+(?:\\.\\d+)?$/.test(value)\n\t        );\n\t    },\n\t    'email': function email(value) {\n\t        return (/^(\\w+|\\.+)((-\\w+|\\.+)|(\\.+\\w+))*\\@\\w+((\\.|-)\\w+)*\\.\\w+/.test(value)\n\t        );\n\t    },\n\t    'maxLen': function maxLen(value, len) {\n\t        var str = String(value),\n\t            rps_value = str.replace(/^\\s+|\\s+$/g, '');\n\t        return rps_value.length <= len;\n\t    },\n\t    'eq': function eq(orginVal, compareVal) {\n\t        return angular.equals(orginVal, compareVal);\n\t    },\n\t    'gt': function gt(val1, val2) {\n\t        return val1 > val2;\n\t    }\n\t};\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\n\tvar _enumType = __webpack_require__(3);\n\n\tvar _pseudoFilter = __webpack_require__(4);\n\n\tvar _pseudoFilter2 = _interopRequireDefault(_pseudoFilter);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\tfunction analyzeOriginRules(originRules, $scope, originName) {\n\t    var analyzeScope = void 0,\n\t        newRules = {};\n\n\t    if (originName) {\n\t        analyzeScope = $scope.$eval(originName);\n\t        if (angular.isArray(analyzeScope)) {\n\t            analyzeScope = analyzeScope[0];\n\t        }\n\t    } else {\n\t        analyzeScope = $scope;\n\t    }\n\n\t    for (var p in originRules) {\n\t        var ruleStr = originRules[p];\n\n\t        if (p === '*') {\n\t            for (var np in analyzeScope) {\n\t                updateRule(newRules, np, ruleStr);\n\t            }\n\t        } else {\n\t            updateRule(newRules, p, ruleStr);\n\t        }\n\t    }\n\n\t    return newRules;\n\t}\n\n\tfunction updateRule(rules, p, ruleStr) {\n\t    var sp = ruleStr.split(/\\s*\\|\\s*/),\n\t        selectorSplit = p.split(/\\s*:\\s*/),\n\t        field = selectorSplit[0];\n\n\t    var itemFilter = angular.isDefined(selectorSplit[1]) ? (0, _pseudoFilter2.default)(selectorSplit.slice(1).join('')) : function () {\n\t        return true;\n\t    };\n\n\t    if (angular.isUndefined(rules[field])) {\n\t        rules[field] = [];\n\t    }\n\n\t    var rItem = rules[field];\n\n\t    for (var i = 0, len = sp.length; i < len; i++) {\n\t        var rsp = sp[i].split(/\\s*:\\s*/),\n\t            methodName = rsp.splice(0, 1)[0].replace(/^\\s+|\\s+$/g, ''),\n\t            isReverse = false;\n\n\t        if (rsp.length > 0) {\n\t            rsp = rsp.map(function (item) {\n\t                var type = void 0;\n\n\t                if (/^\\s*['\"]|['\"]\\s*$/.test(item) || /^-?\\d+(?:\\.\\d+)?$/.test(item)) {\n\t                    type = _enumType.ParamType.VALUE;\n\t                } else {\n\t                    type = _enumType.ParamType.PROPERTY;\n\t                }\n\n\t                return {\n\t                    type: type,\n\t                    value: item.replace(/^\\s+|\\s+$/g, '').replace(/^['\"]|['\"]$/g, '')\n\t                };\n\t            });\n\t        }\n\n\t        if (methodName.indexOf('!') !== -1) {\n\t            isReverse = true;\n\t            methodName = methodName.substr(1);\n\t        }\n\n\t        rItem.push({\n\t            methodName: methodName,\n\t            params: rsp,\n\t            isReverse: isReverse,\n\t            filter: itemFilter\n\t        });\n\t    }\n\n\t    rItem.field = field;\n\n\t    //rItem.pseudoFilter = angular.isDefined(selectorSplit[1])? pseudoFilter(selectorSplit[1]): () => {return true};\n\t}\n\n\texports.default = analyzeOriginRules;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\tvar ParamType = exports.ParamType = {\n\t    PROPERTY: 1,\n\t    VALUE: 2\n\t};\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = pseudoFilter;\n\tfunction pseudoFilter(pseudoStr) {\n\t    var firstChild = pseudoStr.indexOf('first-child') !== -1,\n\t        lastChild = pseudoStr.indexOf('last-child') !== -1,\n\t        nthChild = pseudoStr.indexOf('nth-child') !== -1,\n\t        reverse = pseudoStr.indexOf('not') !== -1;\n\n\t    return function (index, len) {\n\t        var result = true;\n\n\t        if (firstChild) {\n\t            result = index === 0;\n\t        } else if (lastChild) {\n\t            result = index === len - 1;\n\t        } else if (nthChild) {\n\t            var content = /nth-child\\(([^\\)]+)\\)/.exec(pseudoStr)[1];\n\t            result = index === Number(content) - 1;\n\t        }\n\n\t        return reverse ? !result : result;\n\t    };\n\t}\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\n\texports.watchHandle = watchHandle;\n\texports.watchContent = watchContent;\n\n\t__webpack_require__(6);\n\n\tvar _enumType = __webpack_require__(3);\n\n\tfunction watchHandle($scope, rItemList, originName, index) {\n\t    var propPath = void 0;\n\n\t    if (angular.isDefined(originName) && angular.isDefined(index)) {\n\t        propPath = '.' + originName + '[' + index + ']';\n\t    } else {\n\t        propPath = angular.isDefined(originName) ? '.' + originName : '';\n\t    }\n\n\t    //if it has specify another field as parameter, then we need check combo\n\t    if (hasAnotherField(rItemList)) {\n\t        var _ret = function () {\n\t            var fields = getWatchFields(rItemList, propPath, originName);\n\n\t            var funcStr = fields.map(function (itemPath) {\n\n\t                /*           try{\r\n\t                               $scope.$eval(itemPath.replace(/^./, ''));\r\n\t                \n\t                               return `(angular.isObject($scope${itemPath})? JSON.stringify($scope${itemPath}) : $scope${itemPath})`;\r\n\t                           }\r\n\t                           catch(e){\r\n\t                               return '\\'\\'';\r\n\t                           }*/\n\n\t                return '(function(){             \\n                    try{\\n                        return (angular.isObject($scope' + itemPath + ')? JSON.stringify($scope' + itemPath + ') : $scope' + itemPath + ')\\n                    }\\n                    catch(e){\\n                        return \\'\"\"\\';\\n                    }\\n                })()';\n\n\t                // return `(angular.isObject($scope${itemPath})? JSON.stringify($scope${itemPath}) : $scope${itemPath})`\n\t                //return `(angular.isObject($scope${propPath}.${item})? JSON.stringify($scope${propPath}.${item}) : $scope${propPath}.${item})`\n\t            }).join('+');\n\n\t            var watchFn = new Function('$scope', 'index', '\\n            return ' + funcStr + ';\\n        ');\n\n\t            return {\n\t                v: function v($scope) {\n\t                    return watchFn($scope, index);\n\t                }\n\t            };\n\t        }();\n\n\t        if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n\t    } else {\n\t        return new Function('$scope', '\\n            return $scope' + propPath + '.' + rItemList.field + ';\\n        ');\n\t    }\n\t}\n\n\tfunction watchContent(rItems, watchItem, p, customRules, result, timeChecker, $timeout, $scope, originName) {\n\n\t    var path = angular.isDefined(watchItem.index) ? '[' + watchItem.index + '].' + p : '.' + p;\n\n\t    createProp(result, path.replace(/^\\./, ''), { $invalid: false });\n\n\t    var funcStr = ['\\n        var itemResult;\\n    '];\n\n\t    for (var i = 0, len = rItems.length; i < len; i++) {\n\t        var ri = rItems[i];\n\n\t        if (!ri.filter(watchItem.index)) {\n\t            continue;\n\t        }\n\n\t        var params = ri.params.map(function (param) {\n\t            if (param.type === _enumType.ParamType.PROPERTY) {\n\t                if (param.value.indexOf('@') !== -1) {\n\t                    return param.value.replace(/@group/g, '$scope.' + originName);\n\t                }\n\t                return 'layerItem.' + param.value;\n\t            } else {\n\t                return '\\'' + param.value + '\\'';\n\t            }\n\t        });\n\n\t        params = ['layerItem.' + p].concat(params);\n\n\t        var paramsStr = params.join(','),\n\t            isReverse = ri.isReverse ? '!' : '';\n\n\t        funcStr.push('\\n            itemResult = ' + isReverse + 'customRules.' + ri.methodName + '(' + paramsStr + ');\\n            \\n            result' + path + '.$invalid = !itemResult;\\n            \\n            if(!itemResult){\\n                checkResult();\\n                return;\\n            }\\n        ');\n\t    }\n\n\t    funcStr.push('\\n        checkResult();\\n    ');\n\n\t    var watchFn = new Function('result', 'layerItem', 'customRules', '$scope', 'index', 'checkResult', funcStr.join(''));\n\n\t    return function (newValue) {\n\t        if (angular.isUndefined(newValue)) {\n\t            return;\n\t        }\n\n\t        watchFn(result, watchItem.item, customRules, $scope, watchItem.index, function () {\n\t            timeChecker && $timeout.cancel(timeChecker);\n\n\t            timeChecker = $timeout(function () {\n\t                checkValid(result);\n\t            }, 60);\n\t        });\n\t    };\n\t}\n\n\tfunction hasAnotherField(rItemList) {\n\t    for (var i = 0, len = rItemList.length; i < len; i++) {\n\t        var rItem = rItemList[i];\n\n\t        if (angular.isDefined(rItem.params) && rItem.params.findIndex(function (item) {\n\t            return item.type === _enumType.ParamType.PROPERTY;\n\t        }) !== -1) {\n\t            return true;\n\t        }\n\t    }\n\t    return false;\n\t}\n\n\tfunction getWatchFields(rItemList, propPath, originName) {\n\t    var fields = [propPath + '.' + rItemList.field],\n\t        result = [];\n\n\t    for (var i = 0, len = rItemList.length; i < len; i++) {\n\t        var rItem = rItemList[i];\n\n\t        var values = rItem.params.filter(function (item) {\n\t            return item.type === _enumType.ParamType.PROPERTY;\n\t        }).map(function (item) {\n\n\t            if (item.value.indexOf('@group') !== -1) {\n\t                return '.' + item.value.replace(/@group/g, originName);\n\t            } else {\n\t                return propPath + '.' + item.value;\n\t            }\n\t        });\n\n\t        fields = fields.concat(values);\n\t    }\n\n\t    fields.forEach(function (item) {\n\t        if (result.indexOf(item) === -1) {\n\t            result.push(item);\n\t        }\n\t    });\n\n\t    return result;\n\t}\n\n\tfunction createProp(obj, propStr, propVal) {\n\t    var sp = propStr.split('.');\n\t    var node = obj;\n\n\t    for (var i = 0, len = sp.length; i < len; i++) {\n\t        var spName = sp[i];\n\n\t        if (spName.indexOf('[') !== -1) {\n\t            spName = /[^\\[\\]]+/.exec(spName)[0];\n\t        }\n\n\t        if (angular.isUndefined(node[spName])) {\n\t            node[spName] = {};\n\t        }\n\n\t        if (i === len - 1) {\n\t            node[spName] = propVal;\n\t        } else {\n\t            node = node[spName];\n\t        }\n\t    }\n\t}\n\n\tfunction checkValid(obj) {\n\n\t    if (angular.isArray(obj)) {\n\t        for (var i = 0, len = obj.length; i < len; i++) {\n\t            var arrayItem = obj[i];\n\t            for (var _p in arrayItem) {\n\t                if (!/^$/.test(_p) && arrayItem[_p].$invalid) {\n\t                    obj.$invalid = true;\n\t                    return;\n\t                }\n\t            }\n\t        }\n\t    } else {\n\t        for (var p in obj) {\n\t            if (!/^$/.test(p) && obj[p].$invalid) {\n\t                obj.$invalid = true;\n\t                return;\n\t            }\n\t        }\n\t    }\n\n\t    obj.$invalid = false;\n\t}\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\tif (!Array.prototype.findIndex) {\n\t    Array.prototype.findIndex = function (predicate) {\n\t        if (this === null) {\n\t            throw new TypeError('Array.prototype.findIndex called on null or undefined');\n\t        }\n\t        if (typeof predicate !== 'function') {\n\t            throw new TypeError('predicate must be a function');\n\t        }\n\t        var list = Object(this);\n\t        var length = list.length >>> 0;\n\t        var thisArg = arguments[1];\n\t        var value;\n\n\t        for (var i = 0; i < length; i++) {\n\t            value = list[i];\n\t            if (predicate.call(thisArg, value, i, list)) {\n\t                return i;\n\t            }\n\t        }\n\t        return -1;\n\t    };\n\t}\n\n/***/ }\n/******/ ]);"]}