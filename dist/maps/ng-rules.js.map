{"version":3,"sources":["ng-rules.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","RulesService","$timeout","$scope","originName","originRules","source","arguments","length","$eval","ruleHelper","RuleHelper","getRuleObj","$inject","Object","defineProperty","value","_createClass","defineProperties","target","props","i","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_regexCollection","_regexCollection2","_analyzeOriginRules","_analyzeOriginRules2","_watchHandle","this","customRules","angular","copy","timeChecker","watchList","result","_getInitResult","rules","_watchItems","vm","_loop","watchExpressionList","rItems","isDefined","isArray","forEach","item","index","push","watchFunction","watchHandle","undefined","watchFn","$watch","watchContent","clear","$watchCollection","val","_cancelWatchItems","splice","extend","$invalid","$setRule","ruleName","method","factory","required","isUndefined","test","number","email","maxLen","len","str","String","rps_value","replace","eq","orginVal","compareVal","equals","gt","val1","val2","analyzeOriginRules","analyzeScope","newRules","ruleStr","np","updateRule","sp","split","selectorSplit","field","itemFilter","_pseudoFilter2","slice","join","rItem","rsp","methodName","isReverse","map","type","_enumType","ParamType","VALUE","PROPERTY","indexOf","substr","params","filter","_pseudoFilter","pseudoFilter","pseudoStr","firstChild","lastChild","nthChild","reverse","content","exec","Number","rItemList","propPath","hasAnotherField","Function","_ret","fields","getWatchFields","funcStr","itemPath","v","_typeof","watchItem","path","createProp","ri","param","concat","paramsStr","newValue","cancel","checkValid","findIndex","values","propStr","propVal","node","spName","arrayItem","_p","Symbol","iterator","constructor","Array","predicate","list","thisArg"],"mappings":"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","file":"ng-rules.js","sourceRoot":"/source/","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tRulesService.$inject = [\"$timeout\"];\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n\tvar _regexCollection = __webpack_require__(1);\n\n\tvar _regexCollection2 = _interopRequireDefault(_regexCollection);\n\n\tvar _analyzeOriginRules = __webpack_require__(2);\n\n\tvar _analyzeOriginRules2 = _interopRequireDefault(_analyzeOriginRules);\n\n\tvar _watchHandle = __webpack_require__(5);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\tvar RuleHelper = function () {\n\t    function RuleHelper($timeout, $scope, originName, originRules, source) {\n\t        _classCallCheck(this, RuleHelper);\n\n\t        this.customRules = angular.copy(_regexCollection2.default);\n\t        this.timeChecker = null;\n\t        this.$timeout = $timeout;\n\t        this.$scope = $scope;\n\t        this.originName = originName;\n\t        this.source = source;\n\n\t        this.watchList = [];\n\n\t        this.result = this._getInitResult();\n\n\t        this.rules = (0, _analyzeOriginRules2.default)(originRules, $scope, originName);\n\n\t        this._watchItems();\n\t    }\n\n\t    _createClass(RuleHelper, [{\n\t        key: 'getRuleObj',\n\t        value: function getRuleObj() {\n\t            return this.result;\n\t        }\n\t    }, {\n\t        key: '_watchItems',\n\t        value: function _watchItems() {\n\t            var vm = this;\n\n\t            var _loop = function _loop(p) {\n\t                var watchExpressionList = [],\n\t                    rItems = vm.rules[p];\n\n\t                if (angular.isDefined(vm.originName) && angular.isArray(vm.source)) {\n\t                    vm.source.forEach(function (item, index) {\n\t                        watchExpressionList.push({\n\t                            watchFunction: (0, _watchHandle.watchHandle)(vm.$scope, rItems, vm.originName, index),\n\t                            index: index,\n\t                            item: item\n\t                        });\n\t                    });\n\t                } else {\n\t                    watchExpressionList = [{\n\t                        watchFunction: (0, _watchHandle.watchHandle)(vm.$scope, rItems, vm.originName),\n\t                        index: undefined,\n\t                        item: vm.source\n\t                    }];\n\t                }\n\n\t                watchExpressionList.forEach(function (item) {\n\t                    var watchFn = vm.$scope.$watch(item.watchFunction, (0, _watchHandle.watchContent)(rItems, item, p, vm.customRules, vm.result, vm.timeChecker, vm.$timeout, vm.$scope, vm.originName));\n\t                    vm.watchList.push(watchFn);\n\t                });\n\t            };\n\n\t            for (var p in vm.rules) {\n\t                _loop(p);\n\t            }\n\t        }\n\t    }, {\n\t        key: '_cancelWatchItems',\n\t        value: function _cancelWatchItems() {\n\t            this.watchList.forEach(function (clear) {\n\t                clear();\n\t            });\n\n\t            this.watchList = [];\n\t        }\n\t    }, {\n\t        key: '_getInitResult',\n\t        value: function _getInitResult() {\n\t            var result = void 0,\n\t                vm = this;\n\n\t            if (angular.isDefined(vm.originName) && angular.isArray(vm.source)) {\n\t                result = [];\n\t                vm.$scope.$watchCollection(vm.originName, function (val) {\n\t                    if (angular.isDefined(val)) {\n\t                        vm._cancelWatchItems();\n\n\t                        result.splice(0);\n\n\t                        vm._watchItems();\n\t                    }\n\t                });\n\t            } else {\n\t                result = {};\n\t            }\n\n\t            angular.extend(result, {\n\t                $invalid: false,\n\t                $setRule: function $setRule(ruleName, method) {\n\t                    vm.customRules[ruleName] = method;\n\t                }\n\t            });\n\n\t            return result;\n\t        }\n\t    }]);\n\n\t    return RuleHelper;\n\t}();\n\n\tfunction RulesService($timeout) {\n\t    'ngInject';\n\n\t    return function () {\n\t        var $scope = void 0,\n\t            originName = void 0,\n\t            originRules = void 0,\n\t            source = void 0;\n\n\t        //handle dynamic arguments\n\t        if (arguments.length === 2) {\n\t            $scope = arguments[0];\n\t            originRules = arguments[1];\n\t            source = $scope;\n\t        } else {\n\t            $scope = arguments[0];\n\t            originName = arguments[1];\n\t            originRules = arguments[2];\n\t            source = $scope.$eval(originName);\n\t        }\n\n\t        var ruleHelper = new RuleHelper($timeout, $scope, originName, originRules, source);\n\n\t        return ruleHelper.getRuleObj();\n\t    };\n\t}\n\n\texports.default = angular.module('ngRules', []).factory('$rules', RulesService);\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = {\n\t    'required': function required(value) {\n\t        return !(angular.isUndefined(value) || value === null || /^\\s*$/.test(value));\n\t    },\n\t    'number': function number(value) {\n\t        return (/^-?\\d+(?:\\.\\d+)?$/.test(value)\n\t        );\n\t    },\n\t    'email': function email(value) {\n\t        return (/^(\\w+|\\.+)((-\\w+|\\.+)|(\\.+\\w+))*\\@\\w+((\\.|-)\\w+)*\\.\\w+/.test(value)\n\t        );\n\t    },\n\t    'maxLen': function maxLen(value, len) {\n\t        var str = String(value),\n\t            rps_value = str.replace(/^\\s+|\\s+$/g, '');\n\t        return rps_value.length <= len;\n\t    },\n\t    'eq': function eq(orginVal, compareVal) {\n\t        return angular.equals(orginVal, compareVal);\n\t    },\n\t    'gt': function gt(val1, val2) {\n\t        return val1 > val2;\n\t    }\n\t};\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\n\tvar _enumType = __webpack_require__(3);\n\n\tvar _pseudoFilter = __webpack_require__(4);\n\n\tvar _pseudoFilter2 = _interopRequireDefault(_pseudoFilter);\n\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n\tfunction analyzeOriginRules(originRules, $scope, originName) {\n\t    var analyzeScope = void 0,\n\t        newRules = {};\n\n\t    if (originName) {\n\t        analyzeScope = $scope.$eval(originName);\n\t        if (angular.isArray(analyzeScope)) {\n\t            analyzeScope = analyzeScope[0];\n\t        }\n\t    } else {\n\t        analyzeScope = $scope;\n\t    }\n\n\t    for (var p in originRules) {\n\t        var ruleStr = originRules[p];\n\n\t        if (p === '*') {\n\t            for (var np in analyzeScope) {\n\t                updateRule(newRules, np, ruleStr);\n\t            }\n\t        } else {\n\t            updateRule(newRules, p, ruleStr);\n\t        }\n\t    }\n\n\t    return newRules;\n\t}\n\n\tfunction updateRule(rules, p, ruleStr) {\n\t    var sp = ruleStr.split(/\\s*\\|\\s*/),\n\t        selectorSplit = p.split(/\\s*:\\s*/),\n\t        field = selectorSplit[0];\n\n\t    var itemFilter = angular.isDefined(selectorSplit[1]) ? (0, _pseudoFilter2.default)(selectorSplit.slice(1).join('')) : function () {\n\t        return true;\n\t    };\n\n\t    if (angular.isUndefined(rules[field])) {\n\t        rules[field] = [];\n\t    }\n\n\t    var rItem = rules[field];\n\n\t    for (var i = 0, len = sp.length; i < len; i++) {\n\t        var rsp = sp[i].split(/\\s*:\\s*/),\n\t            methodName = rsp.splice(0, 1)[0].replace(/^\\s+|\\s+$/g, ''),\n\t            isReverse = false;\n\n\t        if (rsp.length > 0) {\n\t            rsp = rsp.map(function (item) {\n\t                var type = void 0;\n\n\t                if (/^\\s*['\"]|['\"]\\s*$/.test(item) || /^-?\\d+(?:\\.\\d+)?$/.test(item)) {\n\t                    type = _enumType.ParamType.VALUE;\n\t                } else {\n\t                    type = _enumType.ParamType.PROPERTY;\n\t                }\n\n\t                return {\n\t                    type: type,\n\t                    value: item.replace(/^\\s+|\\s+$/g, '').replace(/^['\"]|['\"]$/g, '')\n\t                };\n\t            });\n\t        }\n\n\t        if (methodName.indexOf('!') !== -1) {\n\t            isReverse = true;\n\t            methodName = methodName.substr(1);\n\t        }\n\n\t        rItem.push({\n\t            methodName: methodName,\n\t            params: rsp,\n\t            isReverse: isReverse,\n\t            filter: itemFilter\n\t        });\n\t    }\n\n\t    rItem.field = field;\n\n\t    //rItem.pseudoFilter = angular.isDefined(selectorSplit[1])? pseudoFilter(selectorSplit[1]): () => {return true};\n\t}\n\n\texports.default = analyzeOriginRules;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\tvar ParamType = exports.ParamType = {\n\t    PROPERTY: 1,\n\t    VALUE: 2\n\t};\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = pseudoFilter;\n\tfunction pseudoFilter(pseudoStr) {\n\t    var firstChild = pseudoStr.indexOf('first-child') !== -1,\n\t        lastChild = pseudoStr.indexOf('last-child') !== -1,\n\t        nthChild = pseudoStr.indexOf('nth-child') !== -1,\n\t        reverse = pseudoStr.indexOf('not') !== -1;\n\n\t    return function (index, len) {\n\t        var result = true;\n\n\t        if (firstChild) {\n\t            result = index === 0;\n\t        } else if (lastChild) {\n\t            result = index === len - 1;\n\t        } else if (nthChild) {\n\t            var content = /nth-child\\(([^\\)]+)\\)/.exec(pseudoStr)[1];\n\t            result = index === Number(content) - 1;\n\t        }\n\n\t        return reverse ? !result : result;\n\t    };\n\t}\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\n\texports.watchHandle = watchHandle;\n\texports.watchContent = watchContent;\n\n\t__webpack_require__(6);\n\n\tvar _enumType = __webpack_require__(3);\n\n\tfunction watchHandle($scope, rItemList, originName, index) {\n\t    var propPath = void 0;\n\n\t    if (angular.isDefined(originName) && angular.isDefined(index)) {\n\t        propPath = '.' + originName + '[' + index + ']';\n\t    } else {\n\t        propPath = angular.isDefined(originName) ? '.' + originName : '';\n\t    }\n\n\t    //if it has specify another field as parameter, then we need check combo\n\t    if (hasAnotherField(rItemList)) {\n\t        var _ret = function () {\n\t            var fields = getWatchFields(rItemList, propPath, originName);\n\n\t            var funcStr = fields.map(function (itemPath) {\n\n\t                /*           try{\r\n\t                               $scope.$eval(itemPath.replace(/^./, ''));\r\n\t                \n\t                               return `(angular.isObject($scope${itemPath})? JSON.stringify($scope${itemPath}) : $scope${itemPath})`;\r\n\t                           }\r\n\t                           catch(e){\r\n\t                               return '\\'\\'';\r\n\t                           }*/\n\n\t                return '(function(){             \\n                    try{\\n                        return (angular.isObject($scope' + itemPath + ')? JSON.stringify($scope' + itemPath + ') : $scope' + itemPath + ')\\n                    }\\n                    catch(e){\\n                        return \\'\"\"\\';\\n                    }\\n                })()';\n\n\t                // return `(angular.isObject($scope${itemPath})? JSON.stringify($scope${itemPath}) : $scope${itemPath})`\n\t                //return `(angular.isObject($scope${propPath}.${item})? JSON.stringify($scope${propPath}.${item}) : $scope${propPath}.${item})`\n\t            }).join('+');\n\n\t            var watchFn = new Function('$scope', 'index', '\\n            return ' + funcStr + ';\\n        ');\n\n\t            return {\n\t                v: function v($scope) {\n\t                    return watchFn($scope, index);\n\t                }\n\t            };\n\t        }();\n\n\t        if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === \"object\") return _ret.v;\n\t    } else {\n\t        return new Function('$scope', '\\n            return $scope' + propPath + '.' + rItemList.field + ';\\n        ');\n\t    }\n\t}\n\n\tfunction watchContent(rItems, watchItem, p, customRules, result, timeChecker, $timeout, $scope, originName) {\n\n\t    var path = angular.isDefined(watchItem.index) ? '[' + watchItem.index + '].' + p : '.' + p;\n\n\t    createProp(result, path.replace(/^\\./, ''), { $invalid: false });\n\n\t    var funcStr = ['\\n        var itemResult;\\n    '];\n\n\t    for (var i = 0, len = rItems.length; i < len; i++) {\n\t        var ri = rItems[i];\n\n\t        if (!ri.filter(watchItem.index)) {\n\t            continue;\n\t        }\n\n\t        var params = ri.params.map(function (param) {\n\t            if (param.type === _enumType.ParamType.PROPERTY) {\n\t                if (param.value.indexOf('@') !== -1) {\n\t                    return param.value.replace(/@group/g, '$scope.' + originName);\n\t                }\n\t                return 'layerItem.' + param.value;\n\t            } else {\n\t                return '\\'' + param.value + '\\'';\n\t            }\n\t        });\n\n\t        params = ['layerItem.' + p].concat(params);\n\n\t        var paramsStr = params.join(','),\n\t            isReverse = ri.isReverse ? '!' : '';\n\n\t        funcStr.push('\\n            itemResult = ' + isReverse + 'customRules.' + ri.methodName + '(' + paramsStr + ');\\n            \\n            result' + path + '.$invalid = !itemResult;\\n            \\n            if(!itemResult){\\n                checkResult();\\n                return;\\n            }\\n        ');\n\t    }\n\n\t    funcStr.push('\\n        checkResult();\\n    ');\n\n\t    var watchFn = new Function('result', 'layerItem', 'customRules', '$scope', 'index', 'checkResult', funcStr.join(''));\n\n\t    return function (newValue) {\n\t        if (angular.isUndefined(newValue)) {\n\t            return;\n\t        }\n\n\t        watchFn(result, watchItem.item, customRules, $scope, watchItem.index, function () {\n\t            timeChecker && $timeout.cancel(timeChecker);\n\n\t            timeChecker = $timeout(function () {\n\t                checkValid(result);\n\t            }, 60);\n\t        });\n\t    };\n\t}\n\n\tfunction hasAnotherField(rItemList) {\n\t    for (var i = 0, len = rItemList.length; i < len; i++) {\n\t        var rItem = rItemList[i];\n\n\t        if (angular.isDefined(rItem.params) && rItem.params.findIndex(function (item) {\n\t            return item.type === _enumType.ParamType.PROPERTY;\n\t        }) !== -1) {\n\t            return true;\n\t        }\n\t    }\n\t    return false;\n\t}\n\n\tfunction getWatchFields(rItemList, propPath, originName) {\n\t    var fields = [propPath + '.' + rItemList.field],\n\t        result = [];\n\n\t    for (var i = 0, len = rItemList.length; i < len; i++) {\n\t        var rItem = rItemList[i];\n\n\t        var values = rItem.params.filter(function (item) {\n\t            return item.type === _enumType.ParamType.PROPERTY;\n\t        }).map(function (item) {\n\n\t            if (item.value.indexOf('@group') !== -1) {\n\t                return '.' + item.value.replace(/@group/g, originName);\n\t            } else {\n\t                return propPath + '.' + item.value;\n\t            }\n\t        });\n\n\t        fields = fields.concat(values);\n\t    }\n\n\t    fields.forEach(function (item) {\n\t        if (result.indexOf(item) === -1) {\n\t            result.push(item);\n\t        }\n\t    });\n\n\t    return result;\n\t}\n\n\tfunction createProp(obj, propStr, propVal) {\n\t    var sp = propStr.split('.');\n\t    var node = obj;\n\n\t    for (var i = 0, len = sp.length; i < len; i++) {\n\t        var spName = sp[i];\n\n\t        if (spName.indexOf('[') !== -1) {\n\t            spName = /[^\\[\\]]+/.exec(spName)[0];\n\t        }\n\n\t        if (angular.isUndefined(node[spName])) {\n\t            node[spName] = {};\n\t        }\n\n\t        if (i === len - 1) {\n\t            node[spName] = propVal;\n\t        } else {\n\t            node = node[spName];\n\t        }\n\t    }\n\t}\n\n\tfunction checkValid(obj) {\n\n\t    if (angular.isArray(obj)) {\n\t        for (var i = 0, len = obj.length; i < len; i++) {\n\t            var arrayItem = obj[i];\n\t            for (var _p in arrayItem) {\n\t                if (!/^$/.test(_p) && arrayItem[_p].$invalid) {\n\t                    obj.$invalid = true;\n\t                    return;\n\t                }\n\t            }\n\t        }\n\t    } else {\n\t        for (var p in obj) {\n\t            if (!/^$/.test(p) && obj[p].$invalid) {\n\t                obj.$invalid = true;\n\t                return;\n\t            }\n\t        }\n\t    }\n\n\t    obj.$invalid = false;\n\t}\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\n\tif (!Array.prototype.findIndex) {\n\t    Array.prototype.findIndex = function (predicate) {\n\t        if (this === null) {\n\t            throw new TypeError('Array.prototype.findIndex called on null or undefined');\n\t        }\n\t        if (typeof predicate !== 'function') {\n\t            throw new TypeError('predicate must be a function');\n\t        }\n\t        var list = Object(this);\n\t        var length = list.length >>> 0;\n\t        var thisArg = arguments[1];\n\t        var value;\n\n\t        for (var i = 0; i < length; i++) {\n\t            value = list[i];\n\t            if (predicate.call(thisArg, value, i, list)) {\n\t                return i;\n\t            }\n\t        }\n\t        return -1;\n\t    };\n\t}\n\n/***/ }\n/******/ ]);"]}